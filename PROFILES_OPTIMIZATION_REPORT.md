# üîç –û—Ç—á–µ—Ç –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π

### –ë—ã–ª–æ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–í—Å–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª–µ–π**: 17
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ**: 10
- **–ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏**: 58.8%

### ‚ùå –£–¥–∞–ª–µ–Ω–Ω—ã–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:

#### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã (4 —É–¥–∞–ª–µ–Ω—ã):
- `code_assistant` - 158 —Å–∏–º–≤–æ–ª–æ–≤
- `creative_writer` - 154 —Å–∏–º–≤–æ–ª–∞
- `analyst` - 157 —Å–∏–º–≤–æ–ª–æ–≤
- `translator` - 125 —Å–∏–º–≤–æ–ª–æ–≤

#### RAG —à–∞–±–ª–æ–Ω—ã (3 —É–¥–∞–ª–µ–Ω—ã):
- `context_prompt` - 134 —Å–∏–º–≤–æ–ª–∞
- `strict_context_prompt` - 522 —Å–∏–º–≤–æ–ª–∞
- `simple_citation_prompt` - 179 —Å–∏–º–≤–æ–ª–æ–≤

#### Chat —à–∞–±–ª–æ–Ω—ã (3 —É–¥–∞–ª–µ–Ω—ã):
- `alpaca` - 153 —Å–∏–º–≤–æ–ª–∞
- `chatml` - 108 —Å–∏–º–≤–æ–ª–æ–≤
- `llama3` - 199 —Å–∏–º–≤–æ–ª–æ–≤

### ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:

#### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã (2):
- `default` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `PromptService` 
- `rag_expert` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `LlamaService` –¥–ª—è RAG –∑–∞–ø—Ä–æ—Å–æ–≤

#### RAG —à–∞–±–ª–æ–Ω—ã (1):
- `citation_focused_prompt` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `RAGService`

#### Chat —à–∞–±–ª–æ–Ω—ã (1):
- `llama2` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `PromptService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìà –£–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–ë—ã–ª–æ –ø—Ä–æ—Ñ–∏–ª–µ–π**: 17
- **–°—Ç–∞–ª–æ –ø—Ä–æ—Ñ–∏–ª–µ–π**: 4  
- **–£–¥–∞–ª–µ–Ω–æ**: 13 (76.5%)
- **–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤**: ~1,789

### üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã**
   - –£–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏
   - –ú–µ–Ω—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞ = –º–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã
   - –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å
   - –ë—ã—Å—Ç—Ä–µ–µ –∏–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π
   - –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. **–Ø—Å–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
   - –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
   - –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –ü—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

### `llamacpp_server/prompts/templates.py`:
```python
# –ë–´–õ–û: 17 –ø—Ä–æ—Ñ–∏–ª–µ–π
SYSTEM_PROMPTS: Dict[str, str] = {
    "default": "...",
    "code_assistant": "...",    # ‚ùå –£–î–ê–õ–ï–ù
    "creative_writer": "...",   # ‚ùå –£–î–ê–õ–ï–ù  
    "analyst": "...",           # ‚ùå –£–î–ê–õ–ï–ù
    "translator": "...",        # ‚ùå –£–î–ê–õ–ï–ù
    "rag_expert": "...",
}

# –°–¢–ê–õ–û: 4 –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)
SYSTEM_PROMPTS: Dict[str, str] = {
    "default": "...",           # ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
    "rag_expert": "...",        # ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
}
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ:

### 1. **–ü—Ä–∏–Ω—Ü–∏–ø YAGNI** (You Aren't Gonna Need It)
- –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π"
- –î–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### 2. **–†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç**
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
- –£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∏–ª–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- –£–∫–∞–∑—ã–≤–∞—Ç—å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å
- –î–æ–±–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π

### 4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞**
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π - —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ù–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å "–∑–∞–≥–æ—Ç–æ–≤–∫–∏" –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:

- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –°–µ—Ä–≤–∏—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üìã –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π** —Å **76.5% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ–º –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏**. 

–ö–∞–∂–¥—ã–π –æ—Å—Ç–∞–≤—à–∏–π—Å—è –ø—Ä–æ—Ñ–∏–ª—å:
- –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ
- –ò–º–µ–µ—Ç —á–µ—Ç–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ  
- –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –±–æ–ª–µ–µ **—á–∏—Å—Ç–æ–π**, **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π** –∏ **–ª–µ–≥–∫–æ–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ**. 